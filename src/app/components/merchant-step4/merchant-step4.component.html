<ion-card>
  <ion-card-header>
    <ion-card-title>STEP 4 - Delivery Information</ion-card-title>
    <ion-card-subtitle>Specify </ion-card-subtitle>
  </ion-card-header>

  <ion-card-content>
    <form action="" [formGroup]="step4Form">
      <ion-label> Delivery Options </ion-label>
  <ion-item lines="none">
    <ion-segment mode="ios" (ionChange)="manageDeliveryOptions($event)" [value]="2" formControlName="deliveryOptions">
      <ion-segment-button [value]="1">
        <ion-label> <ion-icon slot="start" name="bicycle"></ion-icon> <ion-text> Delivery</ion-text> </ion-label>
      </ion-segment-button>
      <ion-segment-button [value]="0">
        <ion-label> <ion-icon slot="start" name="bag"></ion-icon> Pickup</ion-label>
      </ion-segment-button>
      <ion-segment-button [value]="2">
        <ion-label><ion-icon slot="start" name="bicycle"></ion-icon><ion-icon slot="start" name="bag"></ion-icon>
          Both</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-item>


  <ion-row class="ion-align-items-center">
    <ion-col class="flex" size="3">
      <ion-item>
        <ion-input mode="ios" label="Pickup Time" labelPlacement="stacked" formControlName="defaultPickupTime" type="number"
          placeholder="minutes">
        </ion-input>
        Min.
      </ion-item>
    </ion-col>
    <ion-col size="4">
      <ion-label>Pickup time is also consider as preparation time. If its needed, this time can be changed on each
        order.</ion-label>
    </ion-col>
  </ion-row>
  <ng-container *ngFor="let er of merchantScript.errors">
    <ion-label
      *ngIf="step4Form.get('defaultPickupTime')?.hasError(er) && (step4Form.get('defaultPickupTime')?.touched || step4Form.get('defaultPickupTime')?.dirty)"
      class="ion-padding invalid-field" color="danger">
      <ion-icon name="alert-circle-outline"></ion-icon>
      <ion-text> Please add a valid time. </ion-text>
    </ion-label>
  </ng-container>


  <ion-row>
    <ion-col size="3">
      <ion-item>
        <ion-input mode="ios" label="Minimal Order Value" labelPlacement="stacked" formControlName="minOrderValue"
          type="number"></ion-input>
        Kr.
      </ion-item>
      <ng-container *ngFor="let er of merchantScript.errors">
        <ion-label
          *ngIf="step4Form.get('minOrderValue')?.hasError(er) && (step4Form.get('minOrderValue')?.touched || step4Form.get('minOrderValue')?.dirty)"
          class="ion-padding invalid-field" color="danger">
          <ion-icon name="alert-circle-outline"></ion-icon>
          <ion-text> Please add a valid value. </ion-text>
        </ion-label>
      </ng-container>
    </ion-col>
  </ion-row>


  <ion-row *ngIf="this.step4Form.get('deliveryOptions')?.value !== 0">

    <ion-list>
      <ion-item>
        <ion-select label="Max. Distance for Delivery" labelPlacement="stacked" (ionChange)="handleDistance($event)" formControlName="distanceLimit"  
          interface="popover" placeholder="km.">
          <ion-select-option [value]="1.5" >1.5 km.</ion-select-option>
          <ion-select-option [value]="3">3 km.</ion-select-option>
          <ion-select-option [value]="5.5">5.5 km.</ion-select-option>
        </ion-select>
      </ion-item>
    </ion-list>

    <ion-col size="3">
      <ion-item>
        <ion-input mode="ios" label="Delivery Price" labelPlacement="stacked"  formControlName="deliveryPrice"
          type="number"></ion-input>
        Kr.
      </ion-item>
      <ng-container *ngFor="let er of merchantScript.errors">
        <ion-label
          *ngIf="step4Form.get('deliveryPrice')?.hasError(er) && (step4Form.get('deliveryPrice')?.touched || step4Form.get('deliveryPrice')?.dirty)"
          class="ion-padding invalid-field" color="danger">
          <ion-icon name="alert-circle-outline"></ion-icon>
          <ion-text> Please add a valid value. </ion-text>
        </ion-label>
      </ng-container>
    </ion-col>
  </ion-row>

  <ion-row class="btns-row">
    <ion-button (click)="merchantScript.changeToStep(3)" shape="round" mode="ios">Previous</ion-button>
    <ion-button (click)="validateForm()" [disabled]="!step4Form.valid" shape="round" mode="ios">Next</ion-button>
  </ion-row>
    </form>
  </ion-card-content>






</ion-card>